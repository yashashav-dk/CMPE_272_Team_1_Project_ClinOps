apiVersion: v1
kind: ConfigMap
metadata:
  name: dashboard-db-overview
  namespace: observability
  labels:
    grafana_dashboard: "1"
data:
  db-overview.json: |
    { "title": "Database Overview", "uid": "k8s-db-overview", "time": {"from":"now-6h","to":"now"},
      "panels": [
        {"type":"stat","title":"QPS","targets":[{"expr":"sum(rate(prisma_client_queries_total[1m]))"}]},
        {"type":"timeseries","title":"Query Duration p95","targets":[{"expr":"histogram_quantile(0.95, sum(rate(prisma_client_query_duration_seconds_bucket[5m])) by (le))"}]}
      ]
    }
